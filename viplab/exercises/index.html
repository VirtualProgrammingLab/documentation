<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>/numlab/exercises - ViPLab</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">ViPLab</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Welcome to the Viplab documentation</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Ecs2 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../ecs2/" class="dropdown-item">Core ECS</a>
</li>
                                    
<li>
    <a href="../../ecs2/example/" class="dropdown-item">Beispiele</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Rest <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../rest/" class="dropdown-item">ECS REST Interface</a>
</li>
                                    
<li>
    <a href="../../rest/auths/" class="dropdown-item">Auths</a>
</li>
                                    
<li>
    <a href="../../rest/econtent/" class="dropdown-item">Econtent</a>
</li>
                                    
<li>
    <a href="../../rest/eventqueues/" class="dropdown-item">Eventqueues</a>
</li>
                                    
<li>
    <a href="../../rest/memberships/" class="dropdown-item">memberships</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Viplab <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../" class="dropdown-item">Index</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">/numlab/exercises</a>
</li>
                                    
<li>
    <a href="../interrupts/" class="dropdown-item">Interrupts</a>
</li>
                                    
<li>
    <a href="../results/" class="dropdown-item">/numlab/results</a>
</li>
                                    
<li>
    <a href="../solutions/" class="dropdown-item">/numlab/solutions</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Viplab3.0 <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../viplab3.0/" class="dropdown-item">Index</a>
</li>
                                    
<li>
    <a href="../../viplab3.0/computation/" class="dropdown-item">Computation JSON Message</a>
</li>
                                    
<li>
    <a href="../../viplab3.0/computation_result/" class="dropdown-item">Computation Result JSON Message</a>
</li>
                                    
<li>
    <a href="../../viplab3.0/computation_task/" class="dropdown-item">Computation Task JSON Message</a>
</li>
                                    
<li>
    <a href="../../viplab3.0/computation_template/" class="dropdown-item">Computation Template JSON Message</a>
</li>
                                    
<li>
    <a href="../../viplab3.0/system_status/" class="dropdown-item">System status JSON message</a>
</li>
                                    
<li>
    <a href="../../viplab3.0/versioning/" class="dropdown-item">JSON Object Versioning Rules</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../interrupts/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#numlabexercises" class="nav-link">/numlab/exercises</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#interface" class="nav-link">Interface</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#message" class="nav-link">Message</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="numlabexercises">/numlab/exercises</h1>
<p>Persistent resource.</p>
<h2 id="interface">Interface</h2>
<p>POST, GET, DELETE (<a href="/ecs2#message-resource">see ''English section name unknown so far.''</a>)</p>
<h3 id="generic">Generic</h3>
<ul>
<li><strong>POST</strong> creates ai new persistent Exercise: it gets an automatically gererated index for accessing the POSTed Exercise.</li>
<li><strong>GET</strong> returns an URL list of all stored Exercises there. Each list entry can be used for accessing a formerly stored Exercise.</li>
<li><strong>GET</strong> resourceURL/ix:: returns stored Exercise with index ix.</li>
<li><strong>DELETE</strong> resourceURL/ix:: deletes stored Exercise with index ix.</li>
</ul>
<h3 id="viplab-specific">ViPLab Specific</h3>
<p>POST/DELETE will be used by TCs, GET by all clients.</p>
<p>A teacher client (TC) POSTs and DELETEs Exercises; student clients (SCs) and computation clients (CCs) only GET Exercises.</p>
<p>There are some constraints:</p>
<ul>
<li>
<p>No PUT of Exercises:
   for changing an Exercise PUT <em>won't</em> be used. POST of a changed one, followed (sometime) from DELETE of outdated version/s, is the way to go.
   <BR>Rationale: content of an Exercise associated to a decent URL (automatically created, but fixed index) must not change.</p>
</li>
<li>
<p>No reuse of Exercise indices:
   automatically created Exercise indices are monotonically increasing (practically infinite). So the following is valid for an old Solution after deleting some Exercise:</p>
<ul>
<li>
<p>it references the correct Exercise, which has existed at time of Solution creation and continues to exist, or</p>
</li>
<li>
<p>it references nothing.</p>
</li>
</ul>
</li>
</ul>
<p>Fullfilling these constraints avoids the big problem of referencing a <em>wrong</em> Exercise!</p>
<h2 id="message">Message</h2>
<h3 id="excercise-message-json-definition-by-example-informal">Excercise Message JSON Definition by Example (informal)</h3>
<p>Note: <code>//</code> with text following until EOL is a comment,</p>
<ul>
<li>which is not covered by the JSON spec, and</li>
<li>should not be contained in message sends in real;</li>
<li>but nevertheless it would help, if JSON parsers could just ignore them.</li>
</ul>
<pre><code>{ &quot;Exercise&quot; :
{ &quot;postTime&quot;    : &quot;1985-04-12T23:20:50.52Z&quot;, // must, given by TC
  &quot;TTL&quot;         : 360000, // opt, given by TC (here 10*10*3600s = 100h)
  &quot;identifier&quot;  : &quot;Numerik II, SS10, Aufgabe 1, v1.0&quot;, // name of exercise for teachers
  &quot;department&quot;  : &quot;RUS&quot;, // opt, for filtering exercises
  &quot;comment&quot;     : &quot;Um die Studenten mal richtig zu fordern.&quot;, // optional
  &quot;name&quot;        : &quot;Aufgabe 1&quot;,                       // name of exercise to be shown in SCs
  &quot;description&quot; : &quot;Schreiben Sie eine C-Funktion...&quot;,// optional: short description (could be used as 
                                                     // subtitle, longer descriptions in &quot;elements&quot;).
  &quot;elements&quot; : // must: at least one array element
  [
    { &quot;identifier&quot;: &quot;preamble&quot;,                       // for referencing
      &quot;visible&quot;   : true,                             // if it has to be shown in SC
      &quot;modifiable&quot;: false,                            // optional
      &quot;name&quot;      : &quot;Info: source before your code.&quot;, // name of element for student
      &quot;MIMEtype&quot;  : &quot;text/plain&quot;,                     // optional (default: &quot;text/plain&quot;)
      &quot;syntaxHighlighting&quot;: &quot;C&quot;,                      // optional (default: &quot;none&quot;)
      &quot;emphasis&quot;  : &quot;low&quot;,                            // optional (for rendering)
      &quot;value&quot;     : &quot;#include &lt;stdio.h&gt;\n&quot;            // source (newline should be in effect after decoding)
    },
    { &quot;identifier&quot;: &quot;codeFromStudent&quot;,
      &quot;visible&quot;   : true,
      &quot;modifiable&quot;: true,                             // bool; has to be true here to make it editable in SC
      &quot;name&quot;      : &quot;Fill in your code!&quot;,
      &quot;MIMEtype&quot;  : &quot;text/plain&quot;,                     // optional (default: &quot;text/plain&quot;)
      &quot;syntaxHighlighting&quot;: &quot;C&quot;,                      // optional (default: &quot;none&quot;)
      &quot;emphasis&quot;  : &quot;medium&quot;,
      &quot;value&quot;     : &quot;void bar() { /* Schreiben Sie hier Code, der \&quot;bar\&quot; ausgibt. */\n\n}\n&quot; 
                                                      // source (template) from teacher
    },
    { &quot;identifier&quot;: &quot;postscript&quot;,
      &quot;visible&quot;   : true,
      &quot;modifiable&quot;: false,
      &quot;name&quot;      : &quot;Info: source after your code calling bar() in it.&quot;,
      &quot;MIMEtype&quot;  : &quot;text/plain&quot;,                     // optional (default: &quot;text/plain&quot;)
      &quot;syntaxHighlighting&quot;: &quot;C&quot;,                      // optional (default: &quot;none&quot;)
      &quot;emphasis&quot;  : &quot;low&quot;,
      &quot;value&quot;     : &quot;int main() { bar(); return 0; }&quot; // source
    }
  ], // elements[]

  &quot;environment&quot; : &quot;anIdentifier&quot;, // optional

  &quot;config&quot; :
  { &quot;C&quot; : // C language specific stuff
    {
      // phases
      &quot;merging&quot;  : // optional / must (for compiling)
      {
        &quot;sources&quot; : [&quot;preamble&quot;, &quot;codeFromStudent&quot;, &quot;postscript&quot;] // identifiers of to be merged sources
                                                                  // (elements with text content) from above
      },
      &quot;compiling&quot; : // optional / must (for checking/linking)
      {
        &quot;compiler&quot; : &quot;gcc&quot;,      // string
        &quot;flags&quot;    : &quot;-O2 -Wall&quot; // string
      },
      &quot;checking&quot; : // optional
      {
        &quot;sources&quot;: [&quot;codeFromStudent&quot;],   // sources to be checked
        &quot;forbiddenCalls&quot;: &quot;system execve&quot; // forbidden call names separated by WS
      },
      &quot;linking&quot; : // optional / must (for running)
      {
        &quot;flags&quot; : &quot;-lm&quot; // string
      },
      &quot;running&quot; : // optional
      {
        &quot;commandLineArguments&quot; : &quot;--stepwidth 0.001&quot; // string
      },
      &quot;stopAfterPhase&quot; : &quot;running&quot; // optional: &quot;running&quot; here is the same as omitting &quot;stopAfterPhase&quot;
    } // &quot;C&quot;
  } // &quot;config&quot;
} // &quot;Exercise&quot;
} // &quot;Exercise&quot; wrapper
</code></pre>

<h3 id="exercise-json-format">Exercise JSON Format</h3>
<p>Note: wrapper "Exercise" omitted.</p>
<p><em>wrapper "Exercise" around the following</em></p>
<table>
<thead>
<tr>
<th>Key [--Subkey]</th>
<th>Type (a default is marked by <em>italics</em>)</th>
<th>Opt / Must</th>
<th>Description</th>
<th>Comment</th>
<th>AS</th>
</tr>
</thead>
<tbody>
<tr>
<td>postTime</td>
<td>string UTC</td>
<td>must</td>
<td>timestamp from TC</td>
<td>Timestamp from TC: in addition a CC side timestamp could be made. A change of an exercise should be performed by a POST of the changed one, combined with DELETEs of older versions (PUT has problems, see <a href="/viplab">NumLab</a>).</td>
<td>Still needed? Couldn't the websocket API or anybody else generate this?</td>
</tr>
<tr>
<td>TTL</td>
<td>uint seconds</td>
<td>optional</td>
<td>time to live from teacher</td>
<td>Limits validity of Exercise. If (currentTime &gt; postTime + TTL) Exercise can be deleted automatically. In all other cases (includes no TTL) it <strong>must not</strong> be deleted automatically (it can always be deleted manually, of course). For extending the lifetime of an exercise it has to be rePOSTed (leading to a new one with updated postTime).</td>
<td>Is this actually done? Ensured by the backend? Could also be parameter under config/resources?</td>
</tr>
<tr>
<td>identifier</td>
<td>string</td>
<td>must</td>
<td>name for teachers</td>
<td>Technically there is no need for uniqueness of the identifier at this protocol level: e.g. if modifying an exercise, there may be different versions with the same ID.</td>
<td>If there is no technically need, why do we have it?</td>
</tr>
<tr>
<td>department</td>
<td>string</td>
<td>opt</td>
<td>institution shortcut</td>
<td>For filtering exercises at frontend (e.g. for showing only a subset).</td>
<td>Frontend feature</td>
</tr>
<tr>
<td>comment</td>
<td>string</td>
<td>opt</td>
<td>comment from teacher</td>
<td>Generic element: same as comment from others: wrapper (here teacher) says who is originator.</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>opt</td>
<td>name of exercise to be shown in SCs.</td>
<td>If it is missing, "identifier" could be used.</td>
<td>Frontend feature</td>
</tr>
<tr>
<td>description</td>
<td>string (plain text)</td>
<td>opt</td>
<td>short description</td>
<td>Mostly a few lines. A longer description in different formats can be put in "elements" (see below).</td>
<td></td>
</tr>
<tr>
<td>elements</td>
<td>[ {...}, {...}, ... ]</td>
<td>must</td>
<td>array containing <a href="#json-objects-in-exercise-elements">JSON objects</a>: there has to be at least one element</td>
<td></td>
<td></td>
</tr>
<tr>
<td>environment</td>
<td>string</td>
<td>opt</td>
<td>identifier for referring to static environment meta data</td>
<td>Static environment meta data stores complex exercise configurations containing data, which is changing very slowly: e.g. which external post processing tools will be called how for a set of exercises. Optional arguments here may also be placed into the static environment: e.g. linking--flags.</td>
<td>Do we need this? Didn't find it in tests. What can it be?</td>
</tr>
<tr>
<td>routing</td>
<td>struct</td>
<td>opt</td>
<td></td>
<td></td>
<td>Needed without ECS?</td>
</tr>
<tr>
<td>routing --solutionQueue</td>
<td>string</td>
<td>must</td>
<td>Queue to be used for posting Solutions.</td>
<td>If there is <em>no</em> "routing" struct at all, implicit default value for "solutionQueue" is 'solutions', otherwise this key has to be set.</td>
<td></td>
</tr>
<tr>
<td>elementMap</td>
<td>{ SOURCE_ID: URI, ... }</td>
<td>opt</td>
<td>mapping of sources to URIs, SOURCE_ID has to be an identifier (string) of an existing element (ELEMENT_ID), or an identifier of a yet to be generated element (MERGE_ID, availability depends on chain)</td>
<td>Currently only file:// protocol mapping to local file without directory path supported (Note: this is 'file:///filename.txt' for 'filename.txt'). If and how mapped elements will be used, depends on semantics of computation chain defined by "config".<BR> <strong>C/C++/Java</strong>: created files with suffix '.c' resp. '.cpp' resp. '.java' can (explicitly) or will (implicitly) be taken as a source for compilation (see config --C/C++/Java --compiling --sources); all others will just be created (they may be used as input for compilation (e.g. '.h', '.hpp') or executable).</td>
<td>Move to "config--merging"?</td>
</tr>
<tr>
<td>elementProperties</td>
<td>{ SOURCE_ID: { string: VALUE, string: VALUE, ... }</td>
<td>opt</td>
<td>mapping of sources to {} containing properties ('string: VALUE' pairs); SOURCE_ID as defined for elementMap; unique property names, VALUE types and their allowed values have to be defined.</td>
<td>What kind of properties are allowed and their semantics may depend on chain (config --).</td>
<td>From test examples it seems to be that SOURCE_ID can also be the "group" name of an element. Unclear if still needed...</td>
</tr>
<tr>
<td>elementProperties --MERGE_ID --tabType</td>
<td>one of {"source", "header", "data"}</td>
<td>opt</td>
<td>[C/C++][frontend] kind of merged sources</td>
<td>Ignored by backend.</td>
<td></td>
</tr>
<tr>
<td>config</td>
<td>struct</td>
<td>opt</td>
<td>configuration</td>
<td></td>
<td>make "merging" equal for all languages?</td>
</tr>
<tr>
<td>config --Octave</td>
<td>struct</td>
<td>opt</td>
<td>configuration for Octave programming</td>
<td>Same as 'config --Matlab', just replace "Matlab" by "Octave" (all sub attributes are the same).</td>
<td></td>
</tr>
<tr>
<td>config --Matlab</td>
<td>struct</td>
<td>opt</td>
<td>configuration for Matlab programming</td>
<td>Chain: merging -&gt; checking -&gt; interpreting. Merging may be a trivial merge consisting of just one element. Checking needs a positive list of callable functions.</td>
<td></td>
</tr>
<tr>
<td>config --Matlab --merging</td>
<td>struct</td>
<td>must (may be trivial merge)</td>
<td></td>
<td>See <a href="#notes-to-merging">Notes to merging</a>.</td>
<td></td>
</tr>
<tr>
<td>config --Matlab --merging --sources</td>
<td>[ELEMENT_ID, ELEMENT_ID, ...]</td>
<td>must</td>
<td>array of one or more identifiers of to be merged sources; defined by elements[]{ELEMENT_ID} above</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --Matlab --checking</td>
<td>struct</td>
<td>opt</td>
<td>checking for legal function calls in source code</td>
<td>Performed after merging. If omitted, no checking will be done.</td>
<td></td>
</tr>
<tr>
<td>config --Matlab --checking --sources</td>
<td>[ELEMENT_ID, ELEMENT_ID, ...]</td>
<td>must</td>
<td>array of identifiers of to be checked sources; given by elements[]{ELEMENT_ID} above</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --Matlab --checking --allowedCalls</td>
<td>string</td>
<td>must</td>
<td><em>allowed</em> call names separated by WS; only idents (no braces, no func args)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --Matlab --interpreting</td>
<td>struct</td>
<td>opt</td>
<td></td>
<td>If necessary, there may be sub keys later.</td>
<td></td>
</tr>
<tr>
<td>config --Matlab --interpreting --timelimitInSeconds</td>
<td>int</td>
<td>opt</td>
<td>CPU time limit</td>
<td>For semantics see <a href="#notes-to-timelimitinseconds">Notes to "timelimitInSeconds"</a>.</td>
<td></td>
</tr>
<tr>
<td>config --Matlab --stopAfterPhase</td>
<td>one of {"merging", "checking", <em>"interpreting"</em>}</td>
<td>opt</td>
<td>chain: merging -&gt; checking -&gt; interpreting</td>
<td>If omitted, CC tries to execute all given phases (same as <em>"interpreting"</em>).</td>
<td></td>
</tr>
<tr>
<td>config --C</td>
<td>struct</td>
<td>opt</td>
<td>configuration for C programming</td>
<td>Chain: merging -&gt; compiling -&gt; [checking] -&gt; linking -&gt; running. Currently checking is the only phase which can be omitted, if there is a program to be run.</td>
<td></td>
</tr>
<tr>
<td>config --C++</td>
<td>struct</td>
<td>opt</td>
<td>configuration for C++ programming</td>
<td>Chain: merging -&gt; compiling -&gt; linking -&gt; running. Checking is not supported for C++.</td>
<td></td>
</tr>
<tr>
<td>config --Java</td>
<td>struct</td>
<td>opt</td>
<td>configuration for Java programming</td>
<td>Chain: merging -&gt; compiling -&gt; running. Checking is not supported for Java.</td>
<td>Checking is supported?! See below various attributes...</td>
</tr>
<tr>
<td>config --C/C++/Java --merging</td>
<td>struct or []</td>
<td>must / opt (if stopped before)</td>
<td></td>
<td>See <a href="#notes-to-merging">Notes to merging</a>.</td>
<td>Can it be stopped before?</td>
</tr>
<tr>
<td>config --C/C++/Java --merging --sources</td>
<td>[ELEMENT_ID, ELEMENT_ID, ...]</td>
<td>xor must</td>
<td>array of one or more identifiers of to be merged sources; defined by elements[]{ELEMENT_ID} above</td>
<td>Xor must: this xor <em>config --C/C++/Java --merging []</em>. This alternative is for compiling a single source file, generated by a single merge.</td>
<td>Omit and make it always explicit?</td>
</tr>
<tr>
<td>config --C/C++/Java --merging --mergeID</td>
<td>MERGE_ID</td>
<td>opt</td>
<td>identifier of merged sources; has to be unique in union set of: elements[]{ELEMENT_ID} above, together with all mergeIDs (in case of multiple merges)</td>
<td>If given, merge results can be explicitly defined as sources to be compiled by config-- C/C++/Java --compiling --sources; and/or mapped to a file by "elementMap" above. A merge result not being compiled explicitly or implicitly has to be elementMap'ped to become visible as a file to started commands: e.g. compiler (including it as header file) or executable (loading it as input file).</td>
<td></td>
</tr>
<tr>
<td>config --C/C++/Java --merging []</td>
<td>{ "sources": [ELEMENT_ID, ELEMENT_ID, ...], "mergeID": MERGE_ID }, ...</td>
<td>xor must</td>
<td>array of one or more structs as defined by previous <strong>two</strong> items</td>
<td>Xor must: this xor <em>config --C/C++ --merging --sources</em> and (opt) <em>config --C/C++ --merging --mergeID</em>. This alternative is for compiling multiple source files, generated by multiple merges.</td>
<td></td>
</tr>
<tr>
<td>config --C/C++/Java --compiling</td>
<td>struct</td>
<td>must / opt (if stopped before)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --C/C++/Java --compiling --sources</td>
<td>[MERGE_ID, MERGE_ID, ...]</td>
<td>opt</td>
<td>Explicit compilation: MERGE_IDs have to be mergeIDs from merging phase, no mergeID should occur multiple times here. Overrides (implicit) default behavior.</td>
<td>If given, only referenced sources will be compiled (explicitly). If omitted, compilation may be done implicitly by not elementMap'ing some merge result (gets automatically generated filename then), elementMap'ing to a file with suited suffix ('.c', '.cpp', '.java') and name/path (Java). Also see config --C/C++/Java --merging --mergeID and elementMap.</td>
<td>Allow only explicit way?</td>
</tr>
<tr>
<td>config --C/C++ --compiling --compiler</td>
<td>string</td>
<td>must</td>
<td>compiler to be used, e.g. "gcc"</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --C/C++ --compiling --flags</td>
<td>string</td>
<td>must</td>
<td>CFLAGS</td>
<td>e.g. "-O2" or ""</td>
<td></td>
</tr>
<tr>
<td>config --Java --compiling --flags</td>
<td>string</td>
<td>opt</td>
<td>compile flags</td>
<td>e.g. "-v"</td>
<td></td>
</tr>
<tr>
<td>config --C/Java --checking</td>
<td>struct</td>
<td>opt</td>
<td>checking for illegal function calls in source code</td>
<td>Performed after compiling, because compiler gives better syntax error messages. Can be omitted, if no checking should be done.</td>
<td>How can it be omitted?</td>
</tr>
<tr>
<td>config --C/Java --checking --sources</td>
<td>[ELEMENT_ID, ELEMENT_ID, ...]</td>
<td>must</td>
<td>array of identifiers of to be checked sources; given by elements[]{ELEMENT_ID} above</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --C --checking --behavior</td>
<td>one of {<em>mergeAndInclude</em>, "element"}</td>
<td><strong>Ignored!</strong> Hardwired semantics is "mergeAndInclude".</td>
<td>"mergeAndInclude": merged elements will be checked alltogether, types are given by header #include's; <em>"element"</em>: each element will be checked for itself, some predefined standard types</td>
<td>For more details see <a href="#c-checking-semantics">C checking semantics</a>.</td>
<td></td>
</tr>
<tr>
<td>config --C --checking --forbiddenCalls</td>
<td>string</td>
<td>must</td>
<td><em>forbidden</em> call names separated by WS; only idents (no braces, no func args)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --Java --checking --forbiddenCalls</td>
<td>string</td>
<td>opt</td>
<td><em>forbidden</em> call name expressions separated by WS</td>
<td>For semantics see <a href="#java-checking-semantics">Java checking semantics</a>.</td>
<td></td>
</tr>
<tr>
<td>config --Java --checking --allowedCalls</td>
<td>string</td>
<td>opt</td>
<td><em>allowed</em> call name expressions separated by WS</td>
<td>For semantics see <a href="#java-checking-semantics">Java checking semantics</a>.</td>
<td></td>
</tr>
<tr>
<td>config --C/C++ --linking</td>
<td>struct</td>
<td>must / opt (if stopped before)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --C/C++ --linking --flags</td>
<td>string</td>
<td>must</td>
<td>LFLAGS</td>
<td>e.g. ""</td>
<td></td>
</tr>
<tr>
<td>config --C/C++/Java --running</td>
<td>struct</td>
<td>must / opt (if stopped before)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --C/C++/Java --running --commandLineArguments</td>
<td>string</td>
<td>opt</td>
<td>arguments given to main() function</td>
<td>Outlook: mechanism for transforming input values (e.g. by sliders) into CLI arguments.</td>
<td>To be addressed now?</td>
</tr>
<tr>
<td>config --C/C++/Java --running --timelimitInSeconds</td>
<td>int</td>
<td>opt</td>
<td>CPU time limit</td>
<td>For semantics see <a href="#notes-to-timelimitinseconds">Notes to "timelimitInSeconds"</a>.</td>
<td></td>
</tr>
<tr>
<td>config --Java --running --flags</td>
<td>string</td>
<td>opt</td>
<td>flags given to JVM</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --Java --running --mainClass</td>
<td>string</td>
<td>opt (if unique) / must (if not unique)</td>
<td>class containing "public static void main(String[] args) {"</td>
<td>"args" may be another name. If main function is unique, its correct class should be detected automatically.</td>
<td></td>
</tr>
<tr>
<td>config --C --stopAfterPhase</td>
<td>one of {"merging", "compiling", "checking", "linking", <em>"running"</em>}</td>
<td>opt</td>
<td>chain: merging -&gt; compiling -&gt; checking -&gt; linking -&gt; running</td>
<td>If omitted, CC tries to execute all given phases (same as <em>"running"</em>).</td>
<td></td>
</tr>
<tr>
<td>config --C++ --stopAfterPhase</td>
<td>one of {"merging", "compiling", "linking", <em>"running"</em>}</td>
<td>opt</td>
<td>chain: merging -&gt; compiling -&gt; linking -&gt; running</td>
<td>If omitted, CC tries to execute all given phases (same as <em>"running"</em>).</td>
<td></td>
</tr>
<tr>
<td>config --Java --stopAfterPhase</td>
<td>one of {"merging", "compiling", <em>"running"</em>}</td>
<td>opt</td>
<td>chain: merging -&gt; compiling -&gt; running</td>
<td>If omitted, CC tries to execute all given phases (same as <em>"running"</em>).</td>
<td>checking?</td>
</tr>
<tr>
<td>config --DuMuX</td>
<td>struct</td>
<td>opt</td>
<td>configuration for DuMuX</td>
<td>Chain: running. There is a first simple chain for just running preinstalled executables. Later this will be extended.</td>
<td></td>
</tr>
<tr>
<td>config --DuMuX --running</td>
<td>struct</td>
<td>must</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --DuMuX --running --executable</td>
<td>string</td>
<td>must</td>
<td>name of executable to run (as in backend file system)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --DuMuX --running --commandLineArguments</td>
<td>string</td>
<td>opt</td>
<td>additional command line args</td>
<td></td>
<td></td>
</tr>
<tr>
<td>config --DuMuX --running --timelimitInSeconds</td>
<td>int</td>
<td>opt</td>
<td>CPU time limit</td>
<td>For semantics see <a href="#notes-to-timelimitinseconds">Notes to "timelimitInSeconds"</a>.</td>
<td></td>
</tr>
<tr>
<td>config --DuMuX --running --observe_stderr</td>
<td>bool (<em>false</em>)</td>
<td>opt</td>
<td>if true, transfer intermediate stderr Results</td>
<td></td>
<td>Is this implemented?</td>
</tr>
</tbody>
</table>
<h4 id="notes-to-timelimitinseconds">Notes to "timelimitInSeconds"</h4>
<p>There is a default CPU time limit (see RLIMIT_CPU of 'man setrlimit') for running or interpreting, which depends on backend configuration. This is good for terminating non-terminating programs, e.g. endless loops.</p>
<p>Optional attribute "timelimitInSeconds" may lower this default CPU time limit; if it is higher than default, it will be ignored.</p>
<p>Setting it to a value as much as possible below default is good for backend response time under high load; especially, if default is configured for performing expensive computations.</p>
<h4 id="notes-to-ttl-mechanism">Notes to TTL mechanism</h4>
<ul>
<li>TTL mechanism as specified is suited for automatically deleting outdated exercises at development system. However it is not suited for limiting lifetime at production system, because<ul>
<li>extending exercise' lifetime is not possible without changing its resource index, and</li>
<li>referenced exercises may diminish too early (this problems would stay with a PUT new TTL approach!). </li>
</ul>
</li>
</ul>
<h4 id="notes-to-c-config">Notes to C config</h4>
<h5 id="c-checking-semantics">C checking semantics</h5>
<p>08.05.2013: Semantics is "mergeAndInclude" for both prod systems and devel system ("element" unused).</p>
<p>The semantics of config--C--checking--behavior values "mergeAndInclude" (default) and <em>"element"</em> (unused) are totally different.</p>
<ul>
<li><strong>"mergeAndInclude"</strong> (default): Checked will be the merge result of elements after being preprocessed by the C preprocessor, so #include's are allowed and honored. Types have to be defined by the corresponding system headers (e.g. by <code>#include &lt;stdio.h&gt;</code>) and no predefined standard types should be expected. It's possible to have illegal function calls in source elements (being part of some merge) <strong>not</strong> being checked (typically teacher code). This means, that during checking it has to and will be looked, in which source element an illegal function call happens, for knowing, if this actually is an error case.</li>
<li><em><strong>"element"</strong></em> (unused): Each element has to contain correct C code for itself. In addition to basic types some standard types defined in system headers are predefined (e.g. FILE, size_t). Using types from the outside -- e.g. other elements defining them or #include's in teacher code elements -- does <strong>not</strong> work.</li>
</ul>
<p>Common for both: no preprocessor commands are allowed in to be checked elements, with only one exception: #include's are allowed in case of "mergeAndInclude". The reason for the latter is to give students access to source elements serving as headers - editable for them or not. Functions from system headers could be #include'd, too.</p>
<p>The teacher has the responsibility to put unwished system calls like system() and others from libc into "forbiddenCalls".
Another point of control is to avoid linking with libs, whose functions shouldn't be used (this does not work with libc (automatically linked)).</p>
<h4 id="notes-to-java-config">Notes to Java config</h4>
<ul>
<li>Mapping of merged sources to correct files in package directory hierarchy works automatically by package detection. So there is no need to manually map merges to corresponding files.</li>
<li>Main function detection looks for "public static void main(String[] args) {" in all merges ("args" may be another name) <em>not explicitly</em> mapped by "elementMap". If it is unique - only one class containing a main() -, it will be used automatically; otherwise which one to use has to be given by config--Java--running--mainClass.</li>
</ul>
<h4 id="java-checking-semantics">Java checking semantics</h4>
<pre><code>Matching expressions for use in &quot;allowedCalls&quot; and &quot;forbiddenCalls&quot;

'**' is for pure prefix matching; '*' for more fine-granular matching.

Examples of matching expressions:
- java.io.*   matches all calls to methods in all classes in package, but does not match calls to methods in classes in subpackages;
- java.io.**  matches all calls to methods in all classes in package, _and_ in all classes in subpackages (if they exist);

- java.io.Foo    matches all calls to methods in class Foo, _and_ to methods in inner classes;
- java.io.Foo.*  &quot;       &quot;   &quot;     &quot;  &quot;       &quot;  &quot;     &quot;  , but _not_ to methods in inner classes (eg. to java.io.Foo$Bar.callMe);

- java.io.Foo.callMe     matches (only) the call to method callMe in Foo;
- java.io.Foo$Bar.callMe matches (only) the call to method callMe in inner class Foo$Bar.

If used in &quot;forbiddenCalls&quot; only (property &quot;allowedCalls&quot; missing):
- java.io.*   forbids all calls to methods in all classes in package, but allows calls to methods in classes in subpackages;
- java.io.**  forbids all calls to methods in all classes in package, _and_ in all classes in subpackages (if they exist);

- java.io.Foo    forbids all calls to methods in class Foo, _and_ to methods in inner classes;
- java.io.Foo.*  &quot;       &quot;   &quot;     &quot;  &quot;       &quot;  &quot;     &quot;  , but _not_ to methods in inner classes (eg. to java.io.Foo$Bar.callMe);

- java.io.Foo.callMe     forbids (only) the call to method callMe in Foo;
- java.io.Foo$Bar.callMe forbids (only) the call to method callMe in inner class Foo$Bar.

One or more of these expressions may be given by &quot;allowedCalls&quot; and/or &quot;forbiddenCalls&quot;, separated by WS; e.g.
  &quot;forbiddenCalls&quot;: &quot;java.io.** java.lang.Class&quot;
.


An allowed() or forbidden() predicate gives true,
- if one of its corresponding matching expressions - an entry in property &quot;allowedCalls&quot; resp. &quot;forbiddenCalls&quot; - matches, or
- if there is no corresponding property given at all.
Otherwise it gives false.

All calls will be filtered by following composed predicate for getting allowed ones:
  allowed(call) &amp;&amp; ! forbidden(call)   &lt;=&gt;  ! forbidden(call) &amp;&amp; allowed(call)
.

If only one part is given, this predicate reduces to:
  allowed(call)
resp.
  ! forbidden(call)
.

Default for not given part of predicate is
- 'no forbidden': ! forbidden(call) == true, and
- 'all allowed' : allowed(call)     == true.
(opposite defaults would render the given part useless).

If sets 'allowed' and 'forbidden'
- are disjunct         -&gt; 'allowed' are allowed and all other forbidden.
- have an intersection -&gt; ('allowed' minus intersection) is allowed (all other forbidden).

With this logic it is possible to define
- a negative list by giving 'forbiddenCalls' only, or
- a positive one by giving &quot;allowedCalls&quot;, or
- a mixture of both.
</code></pre>

<h4 id="notes-to-dumux-config">Notes to DuMuX config</h4>
<ul>
<li>This "config" is a second step to a more extended one later: it supports choosing between different executables with - optional - one or more input files each.</li>
<li>CC allows one or more objects in Exercise--elements[], which will be used as file input for the given executable. Mappings of element to input file have to be given by "elementMap"; how to become input to executable by "commandLineArguments" (see above).<BR> How resulting input file(s) (in CWD of started executable)  will be given by "commandLineArgs" to executable, has to be defined outside this document.</li>
</ul>
<h4 id="notes-to-merging">Notes to merging</h4>
<p>Merging concatenates given elements for further processing. If non-empty elements do not end with a '\n', it will be added (to have a mapping from each line number of merge result to just <em>one</em> originating element).</p>
<h4 id="json-objects-in-exercise-elements">JSON objects in Exercise--elements[]</h4>
<p>An object in array elements[] has the following members:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type (an enum default is marked by <em>italics</em>)</th>
<th>Opt / Must</th>
<th>Description</th>
<th>Comment</th>
<th>AS</th>
</tr>
</thead>
<tbody>
<tr>
<td>identifier</td>
<td>ELEMENT_ID (string)</td>
<td>must</td>
<td>for later referencing, has to be unique</td>
<td></td>
<td></td>
</tr>
<tr>
<td>group</td>
<td>string</td>
<td>opt</td>
<td>for grouping elements in frontend</td>
<td>Ignored by backend.</td>
<td>Drop?</td>
</tr>
<tr>
<td>visible</td>
<td>bool (<em>false</em>)</td>
<td>opt</td>
<td>if element should be shown in SC</td>
<td>There may be elements not to be shown: e.g. invisible source code.</td>
<td></td>
</tr>
<tr>
<td>modifiable</td>
<td>bool (<em>false</em>)</td>
<td>opt</td>
<td>editability/changeability of "value" (see below) in SC</td>
<td></td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>opt</td>
<td>name to be shown in SC</td>
<td>If it is missing, "identifier" could be used.</td>
<td></td>
</tr>
<tr>
<td>MIMEtype</td>
<td>One of {<em>"text/plain"</em>, "text/html", "text/xml", "text/uri-list"}</td>
<td>opt</td>
<td>info for interpreting content</td>
<td>"text/uri-list": weblinks to be followed and presented in SC.</td>
<td></td>
</tr>
<tr>
<td>syntaxHighlighting</td>
<td>One of {<em>"none"</em>, "C", "C++", "Matlab", "XML", "Java"}</td>
<td>opt</td>
<td><em>"none"</em>: no syntax highlighting; "C": syntax highlighting for C programming language; etc.</td>
<td></td>
<td></td>
</tr>
<tr>
<td>emphasis</td>
<td>One of {"low", <em>"medium"</em>, "high"}</td>
<td>opt</td>
<td>info for rendering</td>
<td></td>
<td>Still needed?</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>must</td>
<td>text or other content</td>
<td>This is the member, which may be modified, if "modifiable" (see above) is true.</td>
<td></td>
</tr>
</tbody>
</table>
<p>Note: objects in array elements[] are identified via their "identifier" member.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
